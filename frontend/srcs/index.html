<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
  crossorigin="anonymous"
  />
  <link rel="icon" href="./assets/images/moon.png">
  <link rel="stylesheet" href="./styles/css/basic.css">
  <title>SPACE PONG</title>
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@v0.164.1/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.164.1/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="./js/app.js" defer ></script>
</head>
<body>
  <div class="app" id="app">
    <div class="background">
      <div class="main-box">
        <div class="header" id="111"></div>
        <div class="control-bar" id="control-bar"></div>
        <div class="footer" id="222"></div>
      </div>
    </div>
  </div>
  <div class="decoration"></div>
  <!--<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
  crossorigin="anonymous"
  ></script>-->
  

  <script type="module">
    import { translate } from './js/utils/translate.js';

    document.addEventListener('DOMContentLoaded', () => {
        //  사용방법 : translate('elementid', 'text to be translated')
        translate('111', 'SPACE PONG');
        translate('222', 'ft_transcendence');
        // Add more translations as needed
    });
  </script>
  <script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js'

    async function init() {
      const scene = new THREE.Scene();
      const gltfLoader = new GLTFLoader();
      const camera = new THREE.PerspectiveCamera(75, 1/1, 0.1, 1000);
      camera.position.z = 4;
      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
      if (window.innerWidth / window.innerHeight < 3/2) {
        renderer.setSize(window.innerWidth * (15/100) * 2, window.innerWidth * (15/100) * 2);
      } else {
        renderer.setSize(window.innerHeight * (15/100) * 3, window.innerHeight * (15/100) * 3);
      }
      document.querySelector('.decoration').appendChild(renderer.domElement);

      function loadGltfModel(url) {
        return new Promise((resolve, reject) => {
          gltfLoader.load(url, (gltf) => {
            resolve(gltf);
          }, undefined, (error) => {
            reject(error);
          });
        });
      }


      const gltf = await loadGltfModel("./assets/glb/sabre.glb");
      gltf.scene.traverse(function (child) {
        if (child.isMesh) {
          if (child.material) {
            child.material.metalness = 1.0;
            child.material.roughness = 0.0;
            child.material.needsUpdate = true;
          }
        }
      });
      gltf.scene.rotation.set(0,0, Math.PI);
      gltf.scene.position.set(-0.3,0,0);
      scene.add(gltf.scene);

      const pointLight = new THREE.PointLight(0xffffff, 10000000);
      pointLight.position.set(100, 100, 100);
      scene.add(pointLight);

      // Create the animation loop
      function animate() {
        requestAnimationFrame(animate);
        /* cube.rotation.x += 0.01;
        cube.rotation.y += 0.01; */
        gltf.scene.rotation.x -= 0.01;
        gltf.scene.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      window.addEventListener('resize', () => {
        if (window.innerWidth / window.innerHeight < 3/2) {
          renderer.setSize(window.innerWidth * (15/100) * 2, window.innerWidth * (15/100) * 2);
        } else {
          renderer.setSize(window.innerHeight * (15/100) * 3, window.innerHeight * (15/100) * 3);
        }
      });
      animate();
    }
    window.addEventListener('load', init);

    
  </script>
  
</body>
</html>
